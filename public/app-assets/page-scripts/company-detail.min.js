function GetTotalCalls(){SetCardOverlay($("#MonthlyTotalCalls"));$.post("/data/company-detail-total-calls",function(n){for(var t=n.xAxis,u=n.inboundList,f=n.outboundList,i=[],r=0;r<t.length;r++)i.push({value:t[r],textStyle:{color:IsDarkTheme?"#fff":"#000",fontSize:14}});require.config({paths:{echarts:"../../../app-assets/vendors/js/charts/echarts"}});require(["echarts","echarts/chart/bar","echarts/chart/line"],function(n){var r=n.init(document.getElementById("basic-column"));t.length==0?r.setOption({title:{show:!0,textStyle:{color:"#000000",fontSize:20},text:Localization.NoData,left:"center",top:"center"},legend:{show:!1},series:[]}):(chartOptions={grid:{x:40,x2:40,y:35,y2:25},tooltip:{trigger:"axis"},legend:{data:[Localization.Inbound,Localization.Outbound],textStyle:{color:IsDarkTheme?"#fff":"#000",fontSize:14}},color:["#4466FD","#FE3B89"],calculable:!0,xAxis:[{type:"category",data:i.length>0?i:[Localization.NoData]}],yAxis:[{type:"value",axisLabel:{textStyle:{color:IsDarkTheme?"#fff":"#000",fontSize:14},rotate:90},splitNumber:3}],series:[{name:Localization.Inbound,type:"bar",data:u,itemStyle:{normal:{label:{show:!0,textStyle:{fontWeight:500}}}}},{name:Localization.Outbound,type:"bar",data:f,itemStyle:{normal:{label:{show:!0,textStyle:{fontWeight:500}}}}}]},r.setOption(chartOptions));$(function(){function n(){setTimeout(function(){r.resize()},200)}$(window).on("resize",n);$(".menu-toggle").on("click",n)})});RemoveCardOverlay($("#MonthlyTotalCalls"))})}function GetMostContacted(n){MostContactedCounts&&(SetCardOverlay($(".MostContactedFilter .dropdown-item").closest(".card")),$.post("/data/company-detail-most-contacted",{f:n},function(n){for(var r,i=[],t=0;t<n.dataList.length;t++)i.push({value:n.dataList[t].numofcalls,name:n.dataList[t].d_name});MostContactedChart.setOption(MostContactedChartOptions,!0);i.length==0?MostContactedChart.setOption({title:{show:!0,textStyle:{color:"#000000",fontSize:20},text:Localization.NoData,left:"center",top:"center"},legend:{show:!1},series:[]}):(r={legend:{orient:"vertical",x:"left",data:n.dataNameList,textStyle:{color:IsDarkTheme?"#fff":"#000",fontSize:14}},series:[{name:Localization.Person,type:"pie",radius:"70%",center:["50%","57.5%"],data:i}]},MostContactedChart.setOption(r));RemoveCardOverlay($(".MostContactedFilter .dropdown-item").closest(".card"))}))}function GetGeneralStatistic(){if(GeneralStatisticCounts){var n=$(".StatisticFilter.active").attr("data-item"),t=StatisticFilterPost.find(t=>t.type===1&&t.time===n);t==undefined?($("#GeneralStatistic").html('<img src="/app-assets/images/loading.gif" style="display:block;margin:0 auto;width:64px;height:64px;" />'),$.post("/data/company-detail-general-statistic",{f:$(".StatisticFilter.active").attr("data-item")},function(t){$("#GeneralStatistic").html(t);StatisticFilterPost.push({type:1,time:n,data:t})})):$("#GeneralStatistic").html(t.data)}}function GetInboundStatistic(){if(TotalInboundStatisticCounts){var n=$(".StatisticFilter.active").attr("data-item"),t=StatisticFilterPost.find(t=>t.type===2&&t.time===n);t==undefined?($("#InboundStatistic").html('<img src="/app-assets/images/loading.gif" style="display:block;margin:0 auto;width:64px;height:64px;" />'),$.post("/data/company-detail-inbound-statistic",{f:$(".StatisticFilter.active").attr("data-item")},function(t){$("#InboundStatistic").html(t);StatisticFilterPost.push({type:2,time:n,data:t})})):$("#InboundStatistic").html(t.data)}}function GetOutboundStatistic(){if(TotalOutboundStatisticCounts){var n=$(".StatisticFilter.active").attr("data-item"),t=StatisticFilterPost.find(t=>t.type===3&&t.time===n);t==undefined?($("#OutboundStatistic").html('<img src="/app-assets/images/loading.gif" style="display:block;margin:0 auto;width:64px;height:64px;" />'),$.post("/data/company-detail-outbound-statistic",{f:$(".StatisticFilter.active").attr("data-item")},function(t){$("#OutboundStatistic").html(t);StatisticFilterPost.push({type:3,time:n,data:t})})):$("#OutboundStatistic").html(t.data)}}function GetExt2ExtStatistic(){if(TotalExt2ExtStatisticCounts){var n=$(".StatisticFilter.active").attr("data-item"),t=StatisticFilterPost.find(t=>t.type===4&&t.time===n);t==undefined?($("#Ext2ExtStatistic").html('<img src="/app-assets/images/loading.gif" style="display:block;margin:0 auto;width:64px;height:64px;" />'),$.post("/data/company-detail-ext2ext-statistic",{f:n},function(t){$("#Ext2ExtStatistic").html(t);StatisticFilterPost.push({type:4,time:n,data:t})})):$("#Ext2ExtStatistic").html(t.data)}}var CallSummaryChart,chartOptions2,MostContactedChart,MostContactedChartOptions,StatisticFilterPost;$(function(){MonthlyTotalCallsCounts&&GetTotalCalls(3);GeneralStatisticCounts&&GetGeneralStatistic();TotalInboundStatisticCounts&&GetInboundStatistic();TotalOutboundStatisticCounts&&GetOutboundStatistic();TotalExt2ExtStatisticCounts&&GetExt2ExtStatistic()});$(window).on("load",function(){CallSummaryCounts&&(require.config({paths:{echarts:"../../../app-assets/vendors/js/charts/echarts"}}),require(["echarts","echarts/chart/bar","echarts/chart/line"],function(n){CallSummaryChart=n.init(document.getElementById("stacked-column"));chartOptions2={grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:[Localization.TotalInbound,Localization.TotalOutbound,Localization.TotalExt2Ext,Localization.TotalMissed,Localization.TotalAbandoned],textStyle:{color:IsDarkTheme?"#fff":"#000",fontSize:14}},color:["#0CE2BC","#FF9F40","#36A2EB","#FF6384","#FFCE56"],calculable:!0,yAxis:[{type:"value",axisLabel:{textStyle:{color:IsDarkTheme?"#fff":"#000",fontSize:14}}}]};CallSummaryChart.setOption(chartOptions2);$(function(){function n(){setTimeout(function(){CallSummaryChart.resize()},200)}$(window).on("resize",n);$(".menu-toggle").on("click",n)});$("#CallSummaryFilter").trigger("change")}))});$("#CallSummaryFilter").on("change",function(){if(CallSummaryCounts){SetCardOverlay($("#CallSummaryCard"));var n=this.value;$.post("/data/company-detail-call-summary",{_f:n},function(t){var i=t.dates,s=t.inbound,h=t.outbound,c=t.missed,l=t.ext2ext,a=t.abandoned,u,r,f,e,o;if(i.length>0){for(u=[],r=0;r<i.length;r++)f=i[r].split("."),e=f[0],u.push({value:e,textStyle:{color:IsDarkTheme?"#fff":"#000",fontSize:14}});CallSummaryChart.setOption(chartOptions2,!0);CallSummaryChart.setOption({xAxis:[{type:"category",data:n==1?i:u}],series:[{name:Localization.TotalInbound,type:"bar",data:s,stack:"advertising"},{name:Localization.TotalOutbound,type:"bar",data:h,stack:"advertising"},{name:Localization.TotalExt2Ext,type:"bar",data:l,stack:"advertising"},{name:Localization.TotalMissed,type:"bar",data:c,stack:"search"},{name:Localization.TotalAbandoned,type:"bar",data:a,stack:"search"}]})}else o={title:{show:!0,textStyle:{color:"black",fontSize:20},text:Localization.NoData,left:"center",top:"center"},xAxis:{show:!1},yAxis:{show:!1},series:[]},CallSummaryChart.clear(),CallSummaryChart.hideLoading(),CallSummaryChart.setOption(o);RemoveCardOverlay($("#CallSummaryCard"))})}});$(window).on("load",function(){MostContactedCounts&&(require.config({paths:{echarts:"../../../app-assets/vendors/js/charts/echarts"}}),require(["echarts","echarts/chart/pie","echarts/chart/funnel"],function(n){MostContactedChart=n.init(document.getElementById("basic-pie"));MostContactedChartOptions={title:{text:Localization.Top5List,subtext:"",x:"center",textStyle:{color:IsDarkTheme?"#fff":"#000",fontSize:18}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},color:["#FF6BDD","#48C4FB","#FEAA4D","#FE4D51","#666ee8"],toolbox:{show:!0,orient:"vertical",feature:{mark:{show:!0,title:{mark:"Markline switch",markUndo:"Undo markline",markClear:"Clear markline"}},dataView:{show:!0,readOnly:!1,title:"View data",lang:["View chart data","Close","Update"]},magicType:{show:!0,title:{pie:"Switch to pies",funnel:"Switch to funnel"},type:["pie","funnel"],option:{funnel:{x:"25%",y:"20%",width:"50%",height:"70%",funnelAlign:"left",max:1548}}},restore:{show:!0,title:"Restore"},saveAsImage:{show:!0,title:"Same as image",lang:["Save"]}}},calculable:!0};MostContactedChart.setOption(MostContactedChartOptions);$(function(){function n(){setTimeout(function(){MostContactedChart.resize()},200)}$(window).on("resize",n);$(".menu-toggle").on("click",n)});GetMostContacted($(".MostContactedFilter .dropdown-item.active").attr("data-item"))}))});$(".MostContactedFilter .dropdown-item").click(function(){MostContactedCounts&&($(".MostContactedFilter .dropdown-item").removeClass("active"),$(this).addClass("active"),GetMostContacted($(".MostContactedFilter .dropdown-item.active").attr("data-item")))});$(".customizer-toggle").on("click",function(){$(".customizer").toggleClass("open")});$(".customizer-close").on("click",function(){$(".customizer").removeClass("open")});StatisticFilterPost=[];$(".StatisticFilter").click(function(){var n=$(this);$(".StatisticFilter").removeClass("active");n.addClass("active");GeneralStatisticCounts&&GetGeneralStatistic();TotalInboundStatisticCounts&&GetInboundStatistic();TotalOutboundStatisticCounts&&GetOutboundStatistic();TotalExt2ExtStatisticCounts&&GetExt2ExtStatistic()});
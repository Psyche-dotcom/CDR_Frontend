function GetDashboardTotal(){TotalCallsCount&&SetCardOverlay($("#DashboardTotalCalls").closest(".card"));TotalInboundCount&&SetCardOverlay($("#DashboardTotalInbound").closest(".card"));TotalOutboundCount&&SetCardOverlay($("#DashboardTotalOutbound").closest(".card"));TotalMissedCount&&SetCardOverlay($("#DashboardTotalMissed").closest(".card"));TotalAbandonedCount&&SetCardOverlay($("#DashboardTotalAbondaned").closest(".card"));TotalExt2ExtCount&&SetCardOverlay($("#DashboardTotalExt2Ext").closest(".card"));$(".index-graphic-bar .numbersize").removeAttr("style");$.post("/data/dashboard-total",{_f:$(".DashboardFilter.active").attr("data-item")},function(n){TotalCallsCount&&$("#DashboardTotalCalls").countTo({from:0,to:n.totalcalls,speed:450});TotalInboundCount&&$("#DashboardTotalInbound").countTo({from:0,to:n.totalinbound,speed:450});TotalOutboundCount&&$("#DashboardTotalOutbound").countTo({from:0,to:n.totaloutbound,speed:450});TotalMissedCount&&$("#DashboardTotalMissed").countTo({from:0,to:n.totalmissed,speed:450});TotalAbandonedCount&&$("#DashboardTotalAbondaned").countTo({from:0,to:n.totalabandoned,speed:450});TotalExt2ExtCount&&$("#DashboardTotalExt2Ext").countTo({from:0,to:n.totalext2ext,speed:450});setTimeout(function(){$(".index-graphic-bar .numbersize").each(function(){var n=$(this).text();$(this).removeAttr("style");n.length<=4?$(this).attr("style","font-size: 3.3rem !important;line-height: 3.3rem!important;"):n.length==5?$(this).attr("style","font-size: 42px !important;line-height: 3.3rem!important;"):n.length>5&&$(this).attr("style","font-size: 38px !important;line-height: 3.3rem!important;")})},910);TotalCallsCount&&RemoveCardOverlay($("#DashboardTotalCalls").closest(".card"));TotalInboundCount&&RemoveCardOverlay($("#DashboardTotalInbound").closest(".card"));TotalOutboundCount&&RemoveCardOverlay($("#DashboardTotalOutbound").closest(".card"));TotalMissedCount&&RemoveCardOverlay($("#DashboardTotalMissed").closest(".card"));TotalAbandonedCount&&RemoveCardOverlay($("#DashboardTotalAbondaned").closest(".card"));TotalExt2ExtCount&&RemoveCardOverlay($("#DashboardTotalExt2Ext").closest(".card"))})}function InitTotalCalls(){var n=document.getElementById("chart-total-calls").getContext("2d"),t;ChartTotalCallsGradient=n.createLinearGradient(0,80,0,130);ChartTotalCallsGradient.addColorStop(0,"rgb(255, 107, 221)");ChartTotalCallsGradient.addColorStop(1,"rgba(255,255,255,0)");t={responsive:!0,maintainAspectRatio:!1,datasetStrokeWidth:3,pointDotStrokeWidth:4,tooltipFillColor:"rgba(255, 145, 73,0.8)",legend:{display:!1},hover:{mode:"label"},scales:{xAxes:[{display:!1}],yAxes:[{display:!1,ticks:{suggestedMax:0,suggestedMax:85}}]},tooltip:{trigger:"axis"},title:{display:!1,fontColor:"#fff",fullWidth:!0,fontSize:30,text:"52%"},cornerRadius:10,fullCornerRadius:!1,stackedRounded:!1};ChartTotalCallsOptions={type:"bar",options:t,data:{}};ChartTotalCalls=new Chart(n,ChartTotalCallsOptions)}function InitTotalInbound(){var n=document.getElementById("chart-total-inbound").getContext("2d"),t;ChartTotalInboundGradient=n.createLinearGradient(0,80,0,130);ChartTotalInboundGradient.addColorStop(0,"rgb(252, 175, 87, 1)");ChartTotalInboundGradient.addColorStop(1,"rgba(255,255,255,0)");t={responsive:!0,maintainAspectRatio:!1,datasetStrokeWidth:3,pointDotStrokeWidth:4,tooltipFillColor:"rgba(255, 145, 73,0.8)",legend:{display:!1},hover:{mode:"label"},scales:{xAxes:[{display:!1}],yAxes:[{display:!1,ticks:{suggestedMax:0,suggestedMax:85}}]},tooltip:{trigger:"axis"},title:{display:!1,fontColor:"#fff",fullWidth:!0,fontSize:30,text:"52%"},cornerRadius:10,fullCornerRadius:!1,stackedRounded:!1};ChartTotalInboundOptions={type:"bar",options:t,data:{}};ChartTotalInbound=new Chart(n,ChartTotalInboundOptions)}function InitTotalOutbound(){var n=document.getElementById("chart-total-outbound").getContext("2d"),t;ChartTotalOutboundGradient=n.createLinearGradient(0,80,0,130);ChartTotalOutboundGradient.addColorStop(0,"rgb(142, 109, 212, 1)");ChartTotalOutboundGradient.addColorStop(1,"rgba(255,255,255,0)");t={responsive:!0,maintainAspectRatio:!1,datasetStrokeWidth:3,pointDotStrokeWidth:4,tooltipFillColor:"rgba(255, 145, 73,0.8)",legend:{display:!1},hover:{mode:"label"},scales:{xAxes:[{display:!1}],yAxes:[{display:!1,ticks:{suggestedMax:0,suggestedMax:85}}]},tooltip:{trigger:"axis"},title:{display:!1,fontColor:"#fff",fullWidth:!0,fontSize:30,text:"52%"},cornerRadius:10,fullCornerRadius:!1,stackedRounded:!1};ChartTotalOutboundOptions={type:"bar",options:t,data:{}};ChartTotalOutbound=new Chart(n,ChartTotalOutboundOptions)}function InitTotalMissed(){var n=document.getElementById("chart-total-missed").getContext("2d"),t;ChartTotalMissedGradient=n.createLinearGradient(0,80,0,130);ChartTotalMissedGradient.addColorStop(0,"rgb(76, 203, 252, 1)");ChartTotalMissedGradient.addColorStop(1,"rgba(255,255,255,0)");t={responsive:!0,maintainAspectRatio:!1,datasetStrokeWidth:3,pointDotStrokeWidth:4,tooltipFillColor:"rgba(255, 145, 73,0.8)",legend:{display:!1},hover:{mode:"label"},scales:{xAxes:[{display:!1}],yAxes:[{display:!1,ticks:{suggestedMax:0,suggestedMax:85}}]},tooltip:{trigger:"axis"},title:{display:!1,fontColor:"#fff",fullWidth:!0,fontSize:30,text:"52%"},cornerRadius:10,fullCornerRadius:!1,stackedRounded:!1};ChartTotalMissedOptions={type:"bar",options:t,data:{}};ChartTotalMissed=new Chart(n,ChartTotalMissedOptions)}function InitTotalAbondaned(){var n=document.getElementById("chart-total-abondaned").getContext("2d"),t;ChartTotalAbondanedGradient=n.createLinearGradient(0,80,0,130);ChartTotalAbondanedGradient.addColorStop(0,"rgb(254, 77, 81, 1)");ChartTotalAbondanedGradient.addColorStop(1,"rgba(255,255,255,0)");t={responsive:!0,maintainAspectRatio:!1,datasetStrokeWidth:3,pointDotStrokeWidth:4,tooltipFillColor:"rgba(255, 145, 73,0.8)",legend:{display:!1},hover:{mode:"label"},scales:{xAxes:[{display:!1}],yAxes:[{display:!1,ticks:{suggestedMax:0,suggestedMax:85}}]},tooltip:{trigger:"axis"},title:{display:!1,fontColor:"#fff",fullWidth:!0,fontSize:30,text:"52%"},cornerRadius:10,fullCornerRadius:!1,stackedRounded:!1};ChartTotalAbondanedOptions={type:"bar",options:t,data:{}};ChartTotalAbondaned=new Chart(n,ChartTotalAbondanedOptions)}function InitTotalExt2Ext(){var n=document.getElementById("chart-total-ext2ext").getContext("2d"),t;ChartTotalExt2ExtGradient=n.createLinearGradient(0,80,0,130);ChartTotalExt2ExtGradient.addColorStop(0,"rgb(101, 224, 202, 1)");ChartTotalExt2ExtGradient.addColorStop(1,"rgba(255,255,255,0)");t={responsive:!0,maintainAspectRatio:!1,datasetStrokeWidth:3,pointDotStrokeWidth:4,tooltipFillColor:"rgba(255, 145, 73,0.8)",legend:{display:!1},hover:{mode:"label"},scales:{xAxes:[{display:!1}],yAxes:[{display:!1,ticks:{suggestedMax:0,suggestedMax:85}}]},tooltip:{trigger:"axis"},title:{display:!1,fontColor:"#fff",fullWidth:!0,fontSize:30,text:"52%"},cornerRadius:10,fullCornerRadius:!1,stackedRounded:!1};ChartTotalExt2ExtOptions={type:"bar",options:t,data:{}};ChartTotalExt2Ext=new Chart(n,ChartTotalExt2ExtOptions)}function DrawTotalCalls(n,t){var i={labels:n,datasets:[{label:Localization.TotalCalls,data:t,backgroundColor:ChartTotalCallsGradient,borderColor:"#FF6BDD",borderWidth:2,strokeColor:"#ffad87",pointRadius:3}]};ChartTotalCallsOptions.data=i;ChartTotalCalls.update()}function DrawTotalInbound(n,t){var i={labels:n,datasets:[{label:Localization.TotalInbound,data:t,backgroundColor:ChartTotalInboundGradient,borderColor:"#FFB051",borderWidth:2,strokeColor:"#ffad87",pointRadius:3}]};ChartTotalInboundOptions.data=i;ChartTotalInbound.update()}function DrawTotalOutbound(n,t){var i={labels:n,datasets:[{label:Localization.TotalOutbound,data:t,backgroundColor:ChartTotalOutboundGradient,borderColor:"#8E6DD4",borderWidth:2,strokeColor:"#ffad87",pointRadius:3}]};ChartTotalOutboundOptions.data=i;ChartTotalOutbound.update()}function DrawTotalMissed(n,t){var i={labels:n,datasets:[{label:Localization.TotalMissed,data:t,backgroundColor:ChartTotalMissedGradient,borderColor:"#4CCBFC",borderWidth:2,strokeColor:"#ffad87",pointRadius:3}]};ChartTotalMissedOptions.data=i;ChartTotalMissed.update()}function DrawTotalAbondaned(n,t){var i={labels:n,datasets:[{label:Localization.TotalAbandoned,data:t,backgroundColor:ChartTotalAbondanedGradient,borderColor:"#FE4D51",borderWidth:2,strokeColor:"#ffad87",pointRadius:3}]};ChartTotalAbondanedOptions.data=i;ChartTotalAbondaned.update()}function DrawTotalExt2Ext(n,t){var i={labels:n,datasets:[{label:Localization.TotalExt2Ext,data:t,backgroundColor:ChartTotalExt2ExtGradient,borderColor:"#65E0CA",borderWidth:2,strokeColor:"#ffad87",pointRadius:3}]};ChartTotalExt2ExtOptions.data=i;ChartTotalExt2Ext.update()}function GetDashboardTotalGraph(){$.post("/data/dashboard-total-graph",function(n){TotalCallsCount&&(DrawTotalCalls(n.dates,n.calls),$(".DashboardTotalCalls-Percent").html(n.callspercent));TotalInboundCount&&(DrawTotalInbound(n.dates,n.inbound),$(".DashboardTotalInbound-Percent").html(n.inboundpercent));TotalOutboundCount&&(DrawTotalOutbound(n.dates,n.outbound),$(".DashboardTotalOutbound-Percent").html(n.outboundpercent));TotalMissedCount&&(DrawTotalMissed(n.dates,n.missed),$(".DashboardTotalMissed-Percent").html(n.missedpercent));TotalAbandonedCount&&(DrawTotalAbondaned(n.dates,n.abandoned),$(".DashboardTotalAbondaned-Percent").html(n.abandonedpercent));TotalExt2ExtCount&&(DrawTotalExt2Ext(n.dates,n.ext2ext),$(".DashboardTotalExt2Ext-Percent").html(n.ext2extpercent))})}function GetMostOutbound(){var n=$('#nav-tab button[data-type="4"].active').attr("data-statue"),t=$('#nav-tab button[data-type="4"].active').attr("data-target");$(t).html('<img src="/app-assets/images/loading.gif" style="display:block;margin:0 auto;width:64px;height:64px" />');$.post("/data/dashboard-most-outbound",{f:n},function(i){$(t).html(i);DashboardPostArray.push("top-five-4-"+n)})}function GetMostAnswered(){var n=$('#nav-tab button[data-type="2"].active').attr("data-statue"),t=$('#nav-tab button[data-type="2"].active').attr("data-target");$(t).html('<img src="/app-assets/images/loading.gif" style="display:block;margin:0 auto;width:64px;height:64px" />');$.post("/data/dashboard-most-answered",{f:n},function(i){$(t).html(i);DashboardPostArray.push("top-five-2-"+n)})}function GetMostTalk(){var n=$('#nav-tab button[data-type="1"].active').attr("data-statue"),t=$('#nav-tab button[data-type="1"].active').attr("data-target");$(t).html('<img src="/app-assets/images/loading.gif" style="display:block;margin:0 auto;width:64px;height:64px" />');$.post("/data/dashboard-most-talk",{f:n},function(i){$(t).html(i);DashboardPostArray.push("top-five-1-"+n)})}function GetMostInbound(){var n=$('#nav-tab button[data-type="3"].active').attr("data-statue"),t=$('#nav-tab button[data-type="3"].active').attr("data-target");$(t).html('<img src="/app-assets/images/loading.gif" style="display:block;margin:0 auto;width:64px;height:64px" />');$.post("/data/dashboard-most-inbound",{f:n},function(i){$(t).html(i);DashboardPostArray.push("top-five-3-"+n)})}var DashboardTotalChart,chartOptions,ChartTotalCalls,ChartTotalCallsOptions,ChartTotalCallsGradient,ChartTotalInbound,ChartTotalInboundOptions,ChartTotalInboundGradient,ChartTotalOutbound,ChartTotalOutboundOptions,ChartTotalOutboundGradient,ChartTotalMissed,ChartTotalMissedOptions,ChartTotalMissedGradient,ChartTotalAbondaned,ChartTotalAbondanedOptions,ChartTotalAbondanedGradient,ChartTotalExt2Ext,ChartTotalExt2ExtOptions,ChartTotalExt2ExtGradient,DashboardPostArray;$(function(){GetMostOutbound();GetMostAnswered();GetMostTalk();GetMostInbound();GetDashboardTotal()});$(".DashboardFilter").click(function(){var n=$(this);$(".DashboardFilter").removeClass("active");n.addClass("active");setTimeout(function(){GetDashboardTotal();var t=parseInt(n.attr("data-item"));switch(t){case 1:$('button[data-type="1"][data-statue="1"]').trigger("click");$('button[data-type="2"][data-statue="1"]').trigger("click");$('button[data-type="3"][data-statue="1"]').trigger("click");$('button[data-type="4"][data-statue="1"]').trigger("click");break;case 2:$('.DashboardGraph a[data-item="2"]').trigger("click");$('button[data-type="1"][data-statue="3"]').trigger("click");$('button[data-type="2"][data-statue="3"]').trigger("click");$('button[data-type="3"][data-statue="3"]').trigger("click");$('button[data-type="4"][data-statue="3"]').trigger("click");break;case 3:$('.DashboardGraph a[data-item="3"]').trigger("click");$('button[data-type="1"][data-statue="4"]').trigger("click");$('button[data-type="2"][data-statue="4"]').trigger("click");$('button[data-type="3"][data-statue="4"]').trigger("click");$('button[data-type="4"][data-statue="4"]').trigger("click");break;case 4:$('.DashboardGraph a[data-item="1"]').trigger("click");$('button[data-type="1"][data-statue="2"]').trigger("click");$('button[data-type="2"][data-statue="2"]').trigger("click");$('button[data-type="3"][data-statue="2"]').trigger("click");$('button[data-type="4"][data-statue="2"]').trigger("click")}},500)});$(window).on("load",function(){TotalCallsGraphics&&(require.config({paths:{echarts:"../../../app-assets/vendors/js/charts/echarts"}}),require(["echarts","echarts/chart/bar","echarts/chart/line"],function(n){DashboardTotalChart=n.init(document.getElementById("basic-area"));chartOptions={grid:{x:40,x2:20,y:35,y2:25},tooltip:{trigger:"axis"},legend:{data:[Localization.Inbound,Localization.Outbound,Localization.TotalCalls],textStyle:{color:IsDarkTheme?"#fff":"#000",fontSize:14}},color:IsDarkTheme?["#35A3FF","#AF60FF","#626BB4"]:["#FF6BDD","#6BF8C7","#FFB051"],calculable:!0};DashboardTotalChart.setOption(chartOptions);$(function(){function n(){setTimeout(function(){DashboardTotalChart.resize()},200)}$(window).on("resize",n);$(".menu-toggle").on("click",n)});$(".DashboardGraph .dropdown-item.active").trigger("click")}))});$(".DashboardGraph .dropdown-item").click(function(){if(TotalCallsGraphics){SetCardOverlay($(".DashboardGraph .dropdown-item").closest(".card"));$(".DashboardGraph .dropdown-item").removeClass("active");$(this).addClass("active");var n=$(this).attr("data-item");$.post("/data/dashboard-graph",{_f:n},function(n){for(var i=n.xAxis,r=n.inboundList,u=n.outboundList,f=n.totalList,e=[],t=0;t<i.length;t++)e.push({value:i[t],textStyle:{color:IsDarkTheme?"#fff":"#000",fontSize:14}});DashboardTotalChart.setOption(chartOptions,!0);r.length==0&&u.length==0&&f.length==0?DashboardTotalChart.setOption({title:{show:!0,textStyle:{color:"#000000",fontSize:20},text:Localization.NoData,left:"center",top:"center"},xAxis:{show:!1},yAxis:{show:!1},series:[]}):DashboardTotalChart.setOption({xAxis:[{type:"category",boundaryGap:!1,data:e}],series:[{name:Localization.Inbound,type:"line",smooth:!0,itemStyle:{normal:{areaStyle:{type:"default"}}},data:r},{name:Localization.Outbound,type:"line",smooth:!0,itemStyle:{normal:{areaStyle:{type:"default"}}},data:u},{name:Localization.TotalCalls,type:"line",smooth:!0,itemStyle:{normal:{areaStyle:{type:"default"}}},data:f}],yAxis:[{type:"value",axisLabel:{textStyle:{color:IsDarkTheme?"#fff":"#000",fontSize:14},rotate:90},splitNumber:3}]});RemoveCardOverlay($(".DashboardGraph .dropdown-item").closest(".card"))})}});$(function(){TotalCallsCount&&InitTotalCalls();TotalInboundCount&&InitTotalInbound();TotalOutboundCount&&InitTotalOutbound();TotalMissedCount&&InitTotalMissed();TotalAbandonedCount&&InitTotalAbondaned();TotalExt2ExtCount&&InitTotalExt2Ext();setTimeout(function(){GetDashboardTotalGraph()},500)});Chart.elements.Rectangle.prototype.draw=function(){function at(n){return tt[(lt+n)%4]}var n=this._chart.ctx,f=this._view,w,b,k,d,ft,et,g,nt=f.borderWidth,it=this._chart.config.options.cornerRadius,p=this._chart.config.options.fullCornerRadius,yt=this._chart.config.options.stackedRounded,pt=this._chart.config.type,ct,st,ht,ti,e,u,i,r,rt,t,h,o,c,s,l,a,v,y,vt,ut,gt,ni;if(it<0&&(it=0),typeof it=="undefined"&&(it=0),typeof p=="undefined"&&(p=!1),typeof yt=="undefined"&&(yt=!1),f.horizontal?(w=f.base,b=f.x,k=f.y-f.height/2,d=f.y+f.height/2,ft=b>w?1:-1,et=1,g=f.borderSkipped||"left"):(w=f.x-f.width/2,b=f.x+f.width/2,k=f.y,d=f.base,ft=1,et=d>k?1:-1,g=f.borderSkipped||"bottom"),nt){ct=Math.min(Math.abs(w-b),Math.abs(k-d));nt=nt>ct?ct:nt;var ot=nt/2,wt=w+(g!=="left"?ot*ft:0),bt=b+(g!=="right"?-ot*ft:0),kt=k+(g!=="top"?ot*et:0),dt=d+(g!=="bottom"?-ot*et:0);wt!==bt&&(k=kt,d=dt);kt!==dt&&(w=wt,b=bt)}n.beginPath();n.fillStyle=f.backgroundColor;n.strokeStyle=f.borderColor;n.lineWidth=nt;var tt=[[w,d],[w,k],[b,k],[b,d]],lt=["bottom","left","top","right"].indexOf(g,0);for(lt===-1&&(lt=0),st=at(0),n.moveTo(st[0],st[1]),rt=1;rt<4;rt++)if(st=at(rt),ht=rt+1,ht==4&&(ht=0),ti=at(ht),e=tt[2][0]-tt[1][0],u=tt[0][1]-tt[1][1],i=tt[1][0],r=tt[1][1],t=it,t>Math.abs(u)/2&&(t=Math.floor(Math.abs(u)/2)),t>Math.abs(e)/2&&(t=Math.floor(Math.abs(e)/2)),u<0)h=i,o=i+e,c=r+u,s=r+u,l=i,a=i+e,v=r,y=r,n.moveTo(l+t,v),n.lineTo(a-t,y),n.quadraticCurveTo(a,y,a,y-t),n.lineTo(o,s+t),p?n.quadraticCurveTo(o,s,o-t,s):n.lineTo(o,s,o-t,s),n.lineTo(h+t,c),p?n.quadraticCurveTo(h,c,h,c+t):n.lineTo(h,c,h,c+t),n.lineTo(l,v-t),n.quadraticCurveTo(l,v,l+t,v);else if(e<0)h=i+e,o=i,c=r,s=r,l=i+e,a=i,v=r+u,y=r+u,n.moveTo(l+t,v),n.lineTo(a-t,y),p?n.quadraticCurveTo(a,y,a,y-t):n.lineTo(a,y,a,y-t),n.lineTo(o,s+t),p?n.quadraticCurveTo(o,s,o-t,s):n.lineTo(o,s,o-t,s),n.lineTo(h+t,c),n.quadraticCurveTo(h,c,h,c+t),n.lineTo(l,v-t),n.quadraticCurveTo(l,v,l+t,v);else{for(vt=0,ut=0,gt=this._chart.data.datasets.length;ut<gt;ut++)this._chart.getDatasetMeta(ut).hidden||(vt=ut);ni=this._datasetIndex===vt;ni?(n.moveTo(i+t,r),n.lineTo(i+e-t,r),n.quadraticCurveTo(i+e,r,i+e,r+t),n.lineTo(i+e,r+u-t),p||pt=="horizontalBar"?n.quadraticCurveTo(i+e,r+u,i+e-t,r+u):n.lineTo(i+e,r+u,i+e-t,r+u),n.lineTo(i+t,r+u),p?n.quadraticCurveTo(i,r+u,i,r+u-t):n.lineTo(i,r+u,i,r+u-t),n.lineTo(i,r+t),p||pt=="bar"?n.quadraticCurveTo(i,r,i+t,r):n.lineTo(i,r,i+t,r)):(n.moveTo(i,r),n.lineTo(i+e,r),n.lineTo(i+e,r+u),n.lineTo(i,r+u),n.lineTo(i,r))}n.fill();nt&&n.stroke()};$(".customizer-toggle").on("click",function(){$(".customizer").toggleClass("open")});$(".customizer-close").on("click",function(){$(".customizer").removeClass("open")});DashboardPostArray=[];$(document).on("click","#nav-tab button",function(){$(this).tab("show");var n=$(this).attr("data-type"),t=$('#nav-tab button[data-type="'+n+'"].active').attr("data-statue");DashboardPostArray.indexOf("top-five-"+n+"-"+t)==-1&&(n=="1"?Top5TalkTimeCounts&&GetMostTalk():n=="2"?Top5AnsweredCallsCounts&&GetMostAnswered():n=="3"?Top5InboundCallsCounts&&GetMostInbound():n=="4"&&Top5OutboundCallsCounts&&GetMostOutbound())});$("#most-talk-refresh").click(function(){Top5TalkTimeCounts&&GetMostTalk()});$("#most-ans-refresh").click(function(){Top5AnsweredCallsCounts&&GetMostAnswered()});$("#least-talk-refresh").click(function(){Top5InboundCallsCounts&&GetMostInbound()});$("#least-ans-refresh").click(function(){Top5OutboundCallsCounts&&GetMostOutbound()});
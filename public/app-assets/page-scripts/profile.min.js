function SaveProfile(){$(".page-loader-wrapper").show();var n={IpAddress:$("#IpAddress").val(),Port:$("#Port").val(),DbName:$("#DbName").val(),DbUsername:$("#DbUsername").val(),DbPassword:$("#DbPassword").val(),Version:$('input[name="version-radio"]:checked').val()};$.post("/ajax/profile-update",n,function(t){t.success?(toastr.success(t.message,Localization.Success),$("#SocketIpAddress").val(n.IpAddress),setTimeout(function(){window.location.reload()},500)):toastr.error(t.message,Localization.Error);$(".page-loader-wrapper").hide()})}function DbConnectionControl(n){$.post("/data/profile-db-control",function(t){t.success?n&&toastr.success(Localization.VeritabaniBaglantiBasarili,Localization.Success):n&&toastr.error(Localization.VeritabaniBaglantiBasarisiz,Localization.Error);$("#ConnectContext").html('<h3 class="profile-connect-text '+(t.success?"":" text-bold-600")+'" > '+Localization.NotConnected+'<\/h3 ><div class="toggle-btn '+(t.success?" active":"")+' float-left" ><input type="checkbox"'+(t.success?"checked":"")+' class="cb-value" disabled /><span class="round-btn"><\/span><\/div><h3 class="profile-connect-text'+(t.success?" text-bold-600":"")+'" > '+Localization.Connected+"<\/h3>")})}function Connect(){async function n(){try{await connection.start();SocketConnectInfo(!0)}catch(n){console.log(n);SocketConnectInfo(!1)}}connection=(new signalR.HubConnectionBuilder).withUrl("http://"+$("#SocketIpAddress").val()+":8899/myMessageHub").configureLogging(signalR.LogLevel.Information).build();connection.onclose(()=>{await n()});n()}function SocketConnectInfo(n){$("#SocketConnectContext").html('<h3 class="profile-connect-text '+(n?"":" text-bold-600")+'" > '+Localization.NotConnected+'<\/h3 ><div class="toggle-btn '+(n?" active":"")+' float-left" ><input type="checkbox"'+(n?"checked":"")+' class="cb-value" disabled /><span class="round-btn"><\/span><\/div><h3 class="profile-connect-text'+(n?" text-bold-600":"")+'" > '+Localization.Connected+"<\/h3>")}$(document).ready(function(){var n=$("#UserInfoPhoneCode").val(),t=$("#UserInfoPhone").val(),i=$("#TempPort").val();$("#IpAddress").mask("099.099.099.099");$("#Port").val(i).change();Connect();DbConnectionControl(!1);$(".PhoneInputMask").usPhoneFormat({format:n==""||n!="90"?"xxxxxxxxxxxxxxx":"(xxx) xxx-xxxx"});$(".bselect:not(.Setted)").each(function(){var n=typeof $(this).attr("multiple")=="undefined";$(this).css("width","100%");$(this).select2({width:"100%",closeOnSelect:n,language:"tr"});$(this).addClass("Setted")});n!==""&&($("#register-phone-code").val(n).trigger("change"),$("#register-phone").val(t));Country>0&&$("#register-country").val(Country).trigger("change")});$("#Save").click(function(){SaveProfile()});$(".profile-content input").keypress(function(n){var t=n.which;if(t==13)return SaveProfile(),!1});$(".cb-value").click(function(){var n=$(this).parent(".toggle-btn");$(n).find("input.cb-value").is(":checked")?$(n).addClass("active"):$(n).removeClass("active")});$("#ConnectControl").on("click",function(){DbConnectionControl(!0)});var connection;$("#SocketConnectControl").on("click",function(){Connect()});$("#cb1").on("click",function(){$("#color-theme-card").toggleClass("day-background");$.post("/ajax/edit-theme",{t:$("#cb1").prop("checked")},function(n){n.success&&window.location.reload()})});$("#SaveTimezone").click(function(){$(".page-loader-wrapper").show();var n={Gmt:$(".js-Selector").select2().find(":selected").data("timezone"),Timezone:$(".js-Selector").val()};$.post("/ajax/profile-timezone-update",n,function(t){t.success?(toastr.success(t.message,Localization.Success),$("#TimezoneText").val(n.Timezone)):toastr.error(t.message,Localization.Error);$(".page-loader-wrapper").hide()})});$("#SavePassword").click(function(){$(".page-loader-wrapper").show();var n={CP:$("#CurrentPassword").val(),NP:$("#NewPassword").val(),RNP:$("#ReNewPassword").val()};$.post("/ajax/profile-change-password",n,function(n){n.success?(toastr.success(n.message,Localization.Success),$("#CurrentPassword").val(""),$("#NewPassword").val(""),$("#ReNewPassword").val("")):toastr.error(n.message,Localization.Error);$(".page-loader-wrapper").hide()})});$("#register-phone-code").change(function(){$("#register-phone").val("");$(".PhoneInputMask").unbind();this.value==="90"?$(".PhoneInputMask").usPhoneFormat({format:"(xxx) xxx-xxxx"}):$(".PhoneInputMask").usPhoneFormat({format:"xxxxxxxxxxxxxxx"})});$("#SaveUserInformation").click(function(){var n={N:$("#UserInfoName").val(),S:$("#UserInfoSurname").val(),E:$("#UserInfoEmail").val(),PC:$("#register-phone-code").val(),P:$("#register-phone").val(),CN:$("#register-country").val(),C:$("#register-city").val(),A:$("#Address").val(),ZP:$("#ZipCode").val()};$.post("/ajax/update-profile",n,function(n){n.success?(toastr.success(n.message,Localization.Success),setTimeout(function(){window.location.reload()},500)):toastr.error(n.message,Localization.Error)})});$("#ZipCode").bind("keyup paste",function(){this.value=this.value.replace(/[^0-9]/g,"")});$("#register-country").on("change",function(){$.post("/data/city-list",{country:this.value},function(n){$("#register-city").html("");for(var t=0;t<n.length;t++)$("#register-city").append('<option value="'+n[t].id+'" '+(n[t].id==City?"selected":"")+">"+n[t].text+"<\/option>");$("#register-city").trigger("change")})});
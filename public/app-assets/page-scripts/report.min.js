function FavoriteFilter(n){var t=$("input[name=date-radio]:checked").val(),i=$("#CustomDateStart").val(),r=$("#CustomDateEnd").val(),u=$("input[name=source-radio]:checked").val(),f=$("input[name=source-creteria-radio]:checked").val(),e=$("#SourceCriteriaInput").val(),o=$("input[name=target-radio]:checked").val(),s=$("input[name=target-creteria-radio]:checked").val(),h=$("#TargetCriteriaInput").val(),c=$("input[name=criteria-radio]:checked").val(),l=$("input[name=duration-radio]:checked").val(),a,v;if(t==undefined&&i==""&&r==""&&u==undefined&&f==undefined&&e==""&&o==undefined&&s==undefined&&h==""&&c==undefined&&l==undefined)return toastr.error(Localization.EnAz1SecimYap,Localization.Error),swal.close(),!1;a={Title:n,Dates:t,DatesStart:i,DatesEnd:r,Source:u,SourceCriteria:f,SourceCriteriaInput:e,Target:o,TargetCriteria:s,TargetCriteriaInput:h,Status:c,Duration:l};v={Title:n,Json:JSON.stringify(a)};$.post("/ajax/add-favorite-report-filter",v,function(n){n.success?(toastr.success(n.message,Localization.Success),GetFavoriteFilterList(),DeleteAllFilters()):toastr.error(n.message,Localization.Error);swal.close()})}function GetFavoriteFilterList(){$("#FavoriteReportList").html('<img src="/app-assets/images/loading.gif" style="display:block;margin:0 auto;width:64px;height:64px;" />');$.post("/data/get-favorite-report-filter",function(n){$("#FavoriteReportList").html(n)})}function DeleteAllFilters(){$("input[name=date-radio]").prop("checked",!1);$("#CustomDateStart").val("");$("#CustomDateEnd").val("");$("input[name=source-radio]").prop("checked",!1);$("input[name=source-creteria-radio]").prop("checked",!1);$("#SourceCriteriaInput").val("");$("input[name=target-radio]").prop("checked",!1);$("input[name=target-creteria-radio]").prop("checked",!1);$("#TargetCriteriaInput").val("");$("input[name=criteria-radio]").prop("checked",!1);$("input[name=duration-radio]").prop("checked",!1);$("#TargetCriteriaInputDiv").slideUp();$("#SourceCriteriaInputDiv").slideUp();$("#FilterDateCustomDiv").slideUp()}function GetFilters(){var n=$("input[name=date-radio]:checked").val(),t=$("#CustomDateStart").val(),i=$("#CustomDateEnd").val(),r=$("input[name=source-radio]:checked").val(),u=$("input[name=source-creteria-radio]:checked").val(),f=$("#SourceCriteriaInput").val(),e=$("input[name=target-radio]:checked").val(),o=$("input[name=target-creteria-radio]:checked").val(),s=$("#TargetCriteriaInput").val(),h=$("input[name=criteria-radio]:checked").val(),c=$("input[name=duration-radio]:checked").val(),l={Title:"",Dates:n,DatesStart:t,DatesEnd:i,Source:r,SourceCriteria:u,SourceCriteriaInput:f,Target:e,TargetCriteria:o,TargetCriteriaInput:s,Status:h,Duration:c};return JSON.stringify(l)}var Dt=$("#AllTable").DataTable({serverSide:!0,orderMulti:!1,processing:!0,pageLength:10,ajax:{url:"/data/get-report-calls",type:"POST",datatype:"json",data:function(n){n.json=GetFilters();n.ResultCount=$("#ResultCount").val()}},columns:[{data:"call_id",visible:!1},{data:"tablecolumndate"},{data:"tablecolumnstarttime"},{data:"tablecolumnfrom"},{data:"tablecolumnto"},{data:"tablecolumninorout"},{data:"tablecolumnduration"},{data:"tablecolumntalktime"},{data:"tablecolumnstatus"},{data:"tablecolumnbutton"}],fnDrawCallback:function(){$("#ResultCount").val(this.fnSettings().fnRecordsTotal())},createdRow:function(n,t){$(n).addClass("report-table-row-border-"+t.inorout)},responsive:!0,autoWidth:!1,bLengthChange:!1,searching:!1,language:{sEmptyTable:Localization.sEmptyTable,sInfo:Localization.sInfo,sInfoEmpty:Localization.sInfoEmpty,sInfoFiltered:Localization.sInfoFiltered,sLengthMenu:Localization.sLengthMenu,sLoadingRecords:Localization.sLoadingRecords,sProcessing:Localization.sProcessing,sSearch:Localization.sSearch,sZeroRecords:Localization.sZeroRecords,oPaginate:{sFirst:Localization.sFirst,sLast:Localization.sLast,sNext:Localization.sNext,sPrevious:Localization.sPrevious}},oLanguage:{sProcessing:'<span class="load load-button"><\/span>'}});$(document).ready(function(){$(".datetimepicker").datetimepicker({format:"Y.m.d H:i"});GetFavoriteFilterList()});$(".customizer-toggle").on("click",function(){$(".customizer").toggleClass("open")});$(".customizer-close").on("click",function(){$(".customizer").removeClass("open")});$("#FilterDateSelect").on("change",function(){this.value==5?$("#FilterDateCustomDiv").slideDown():($("#FilterDateCustomDiv").slideUp(),$("#FilterDateCustomDiv input").val(""))});$("input[type=radio][name=date-radio]").change(function(){this.value==11?$("#FilterDateCustomDiv").slideDown():($("#FilterDateCustomDiv").slideUp(),$("#FilterDateCustomDiv input").val(""))});$("input[type=radio][name=source-creteria-radio]").change(function(){var n=$(this).attr("data-placeholder");this.value!=1?($("#SourceCriteriaInputDiv input").attr("placeholder",n),$("#SourceCriteriaInputDiv").slideDown()):($("#SourceCriteriaInputDiv").slideUp(),$("#SourceCriteriaInputDiv input").val(""),$("#SourceCriteriaInputDiv input").removeAttr("placeholder"))});$("input[type=radio][name=target-creteria-radio]").change(function(){var n=$(this).attr("data-placeholder");this.value!=1?($("#TargetCriteriaInputDiv input").attr("placeholder",n),$("#TargetCriteriaInputDiv").slideDown()):($("#TargetCriteriaInputDiv").slideUp(),$("#TargetCriteriaInputDiv input").val(""),$("#TargetCriteriaInputDiv input").removeAttr("placeholder"))});$("#AddFavorite").click(function(){swal({title:Localization.Favorite,text:Localization.FavoriBaslikMesaji,type:"input",showCancelButton:!0,closeOnConfirm:!1,inputPlaceholder:Localization.WriteSomething},function(n){if(n===!1)return!1;if(n==="")return swal.showInputError(Localization.WriteSomethingMessage),!1;FavoriteFilter(n)})});$(document).on("click",".favorite-button-delete",function(){var n=$(this).attr("data-item");swal({title:Localization.AreYouSure,text:Localization.FavoriSilmekEminMisiniz,type:"warning",showCancelButton:!0,confirmButtonClass:"btn-danger",confirmButtonText:Localization.EvetSil,closeOnConfirm:!1},function(t){if(t===!1)return!1;var i={I:n};$.post("/ajax/delete-favorite-report-filter",i,function(n){n.success?(toastr.success(n.message,Localization.Success),GetFavoriteFilterList()):toastr.error(n.message,Localization.Error);swal.close()})})});$(document).on("click",".favorite-button-view",function(){var i=$(this).attr("data-item"),t=$("#FavoriteFilterDataList-"+i).html(),n;if(t=="")return toastr.error(Localization.FavoriFiltrelemesiBulunamadi,Localization.Error),!1;DeleteAllFilters();n=JSON.parse(t);$("input[name=date-radio][value="+n.Dates+"]").prop("checked",!0);n.Dates!=undefined&&n.Dates==11&&$("#FilterDateCustomDiv").slideDown();$("#CustomDateStart").val(n.DatesStart);$("#CustomDateEnd").val(n.DatesEnd);$("input[name=source-radio][value="+n.Source+"]").prop("checked",!0);$("input[name=source-creteria-radio][value="+n.SourceCriteria+"]").prop("checked",!0);n.SourceCriteria!=undefined&&n.SourceCriteria!=1&&$("#SourceCriteriaInputDiv").slideDown();$("#SourceCriteriaInput").val(n.SourceCriteriaInput);$("input[name=target-radio][value="+n.Target+"]").prop("checked",!0);$("input[name=target-creteria-radio][value="+n.TargetCriteria+"]").prop("checked",!0);n.TargetCriteria!=undefined&&n.TargetCriteria!=1&&$("#TargetCriteriaInputDiv").slideDown();$("#TargetCriteriaInput").val(n.TargetCriteriaInput);$("input[name=criteria-radio][value="+n.Status+"]").prop("checked",!0);$("input[name=duration-radio][value="+n.Duration+"]").prop("checked",!0);$(".customizer-close").trigger("click");n.Dates!=11&&$("#Filter").trigger("click")});$("#Filter").click(function(){$("#ResultCount").val(-1);Dt.ajax.reload();$("html, body").animate({scrollTop:$("#AllCallsCard").offset().top-80},800)});$(".exportExcel").click(function(){var n=GetFilters(),t="/ajax/excel-export-report-calls",i=!0;n!=null&&n.length>0&&(t+=(i?"?":"&")+"json="+n,i=!1);window.open(t,"_blank")});